#!/bin/bash

SWIFT_TEST_DIR=/home/$USER/openstack-swift/
SWIFT_ETC_DIR=$SWIFT_TEST_DIR/etc/
SWIFT_CODE_DIR=/home/mjwtom/PycharmProjects/swift/

cd $SWIFT_ETC_DIR

rm -f *.builder *.ring.gz backups/*.builder backups/*.ring.gz

rm -rf $SWIFT_TEST_DIR/.git

cp -rf $SWIFT_CODE_DIR/.git $SWIFT_TEST_DIR

export PYTHONPATH=$PYTHONPATH:$SWIFT_CODE_DIR

$SWIFT_CODE_DIR/bin/swift-ring-builder object.builder create 10 3 1
$SWIFT_CODE_DIR/bin/swift-ring-builder object.builder add r1z1-127.0.0.1:6010/sdb1 1
$SWIFT_CODE_DIR/bin/swift-ring-builder object.builder add r1z2-127.0.0.1:6020/sdb2 1
$SWIFT_CODE_DIR/bin/swift-ring-builder object.builder add r1z3-127.0.0.1:6030/sdb3 1
$SWIFT_CODE_DIR/bin/swift-ring-builder object.builder add r1z4-127.0.0.1:6040/sdb4 1
$SWIFT_CODE_DIR/bin/swift-ring-builder object.builder rebalance
$SWIFT_CODE_DIR/bin/swift-ring-builder object-1.builder create 10 2 1
$SWIFT_CODE_DIR/bin/swift-ring-builder object-1.builder add r1z1-127.0.0.1:6010/sdb1 1
$SWIFT_CODE_DIR/bin/swift-ring-builder object-1.builder add r1z2-127.0.0.1:6020/sdb2 1
$SWIFT_CODE_DIR/bin/swift-ring-builder object-1.builder add r1z3-127.0.0.1:6030/sdb3 1
$SWIFT_CODE_DIR/bin/swift-ring-builder object-1.builder add r1z4-127.0.0.1:6040/sdb4 1
$SWIFT_CODE_DIR/bin/swift-ring-builder object-1.builder rebalance
$SWIFT_CODE_DIR/bin/swift-ring-builder object-2.builder create 10 6 1
$SWIFT_CODE_DIR/bin/swift-ring-builder object-2.builder add r1z1-127.0.0.1:6010/sdb1 1
$SWIFT_CODE_DIR/bin/swift-ring-builder object-2.builder add r1z1-127.0.0.1:6010/sdb5 1
$SWIFT_CODE_DIR/bin/swift-ring-builder object-2.builder add r1z2-127.0.0.1:6020/sdb2 1
$SWIFT_CODE_DIR/bin/swift-ring-builder object-2.builder add r1z2-127.0.0.1:6020/sdb6 1
$SWIFT_CODE_DIR/bin/swift-ring-builder object-2.builder add r1z3-127.0.0.1:6030/sdb3 1
$SWIFT_CODE_DIR/bin/swift-ring-builder object-2.builder add r1z3-127.0.0.1:6030/sdb7 1
$SWIFT_CODE_DIR/bin/swift-ring-builder object-2.builder add r1z4-127.0.0.1:6040/sdb4 1
$SWIFT_CODE_DIR/bin/swift-ring-builder object-2.builder add r1z4-127.0.0.1:6040/sdb8 1
$SWIFT_CODE_DIR/bin/swift-ring-builder object-2.builder rebalance
$SWIFT_CODE_DIR/bin/swift-ring-builder object-3.builder create 10 3 1
$SWIFT_CODE_DIR/bin/swift-ring-builder object-3.builder add r1z1-127.0.0.1:6010/sdb1 1
$SWIFT_CODE_DIR/bin/swift-ring-builder object-3.builder add r1z2-127.0.0.1:6020/sdb2 1
$SWIFT_CODE_DIR/bin/swift-ring-builder object-3.builder add r1z3-127.0.0.1:6030/sdb3 1
$SWIFT_CODE_DIR/bin/swift-ring-builder object-3.builder add r1z4-127.0.0.1:6040/sdb4 1
$SWIFT_CODE_DIR/bin/swift-ring-builder object-3.builder rebalance
$SWIFT_CODE_DIR/bin/swift-ring-builder container.builder create 10 3 1
$SWIFT_CODE_DIR/bin/swift-ring-builder container.builder add r1z1-127.0.0.1:6011/sdb1 1
$SWIFT_CODE_DIR/bin/swift-ring-builder container.builder add r1z2-127.0.0.1:6021/sdb2 1
$SWIFT_CODE_DIR/bin/swift-ring-builder container.builder add r1z3-127.0.0.1:6031/sdb3 1
$SWIFT_CODE_DIR/bin/swift-ring-builder container.builder add r1z4-127.0.0.1:6041/sdb4 1
$SWIFT_CODE_DIR/bin/swift-ring-builder container.builder rebalance
$SWIFT_CODE_DIR/bin/swift-ring-builder account.builder create 10 3 1
$SWIFT_CODE_DIR/bin/swift-ring-builder account.builder add r1z1-127.0.0.1:6012/sdb1 1
$SWIFT_CODE_DIR/bin/swift-ring-builder account.builder add r1z2-127.0.0.1:6022/sdb2 1
$SWIFT_CODE_DIR/bin/swift-ring-builder account.builder add r1z3-127.0.0.1:6032/sdb3 1
$SWIFT_CODE_DIR/bin/swift-ring-builder account.builder add r1z4-127.0.0.1:6042/sdb4 1
$SWIFT_CODE_DIR/bin/swift-ring-builder account.builder rebalance
